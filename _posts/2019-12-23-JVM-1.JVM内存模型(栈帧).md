---
layout: post
title: "JVMå†…å­˜æ¨¡å‹(æ ˆå¸§)"
date: 2019-12-23 20:41:15 +0800
categories: [Java,JVM]
tags: [Java,JVM]
comments: 1
toc: true
---

# JVMå†…å­˜æ¨¡å‹

> JVMç»“æ„å›¾

![å¯¼å›¾](/files/jvm/JVMç»“æ„å›¾.png)

> Javaçº¿ç¨‹å†…å­˜æ¨¡å‹JMM

![å¯¼å›¾](/files/jvm/Javaçº¿ç¨‹å†…å­˜æ¨¡å‹JMM.png)

todo 2019å¹´12æœˆ23æ—¥ 20:23:30 https://www.bilibili.com/video/av64709063?p=3

1. è§†é¢‘ <https://www.bilibili.com/video/av64709063>
2. `JVMæŒ‡ä»¤æ‰‹å†Œ` <https://blog.csdn.net/hudashi/article/details/7062675>
3. æœ‰åŠ©ç†è§£çš„å¸–å­ <https://segmentfault.com/q/1010000008683475>

- JVM ä»è½¯ä»¶å±‚é¢å±è”½ä¸åŒæ“ä½œç³»ç»Ÿåœ¨åº•å±‚ç¡¬ä»¶ä¸æŒ‡ä»¤ä¸Šçš„åŒºåˆ« ;
- æ ˆå¸§ : ä¸€ä¸ª`æ–¹æ³•`å¯¹åº”ä¸€å—`æ ˆå¸§`å†…å­˜åŒºåŸŸ ; å…ˆè¿›åå‡º FILO , æ–¹æ³•æ‰§è¡Œå®Œåä¾æ¬¡å‡ºæ ˆ
- ç¨‹åºè®¡æ•°å™¨: çº¿ç¨‹ç‰¹æœ‰çš„,æ ‡è¯†çº¿ç¨‹é©¬ä¸Šè¦æ‰§è¡Œçš„é‚£ä¸€è¡Œä»£ç çš„å†…å­˜åœ°å€æŒ‡é’ˆ
- store å’Œ load :
æ“ä½œæ•°æ ˆ ğŸ‘‰ å±€éƒ¨å˜é‡è¡¨ , store
å±€éƒ¨å˜é‡è¡¨ ğŸ‘‰ æ“ä½œæ•°æ ˆ , load
- æ“ä½œæ•°æ ˆ:æ•°æ®ä¸´æ—¶å­˜å‚¨åŒºåŸŸ
- æ–¹æ³•å‡ºå£:è°ƒç”¨è¯¥æ–¹æ³•æ—¶çš„ä½ç½®  "ä»å“ªè¿›æ¥çš„ä»å“ªå‡ºå»"
- å¼•ç”¨ç±»å‹(new å‡ºæ¥çš„å¯¹è±¡) : ç”¨å †æ›¿ä»£æ“ä½œæ•°æ ˆå­˜å‚¨æ•°æ® , å³ å±€éƒ¨å˜é‡è¡¨ ğŸ‘‰ å †

```java
public class JVM01_Math {

    public static final Integer CONSTANT = 666;

    public int compute() {
        int a = 1;
        int b = 2;
        int c = (a + b) * 10;
        return c;
    }

    public static void main(String[] args) {

        JVM01_Math jvm01Math = new JVM01_Math();
        jvm01Math.compute();


    }

}
```
â˜˜ åæ±‡ç¼– `javap -c JVM01_Math.class` :
```java
PS C:\fastwork\Project\Idea\AndoJava\target\classes\jvm> javap -c JVM01_Math.class
Compiled from "JVM01_Math.java"
public class jvm.JVM01_Math {
  public static final java.lang.Integer CONSTANT;

  public jvm.JVM01_Math();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public int compute();
    Code:
       0: iconst_1              //å°†intå‹(1)æ¨é€è‡³æ ˆé¡¶
       1: istore_1              //å°†æ ˆé¡¶intå‹æ•°å€¼å­˜å…¥ç¬¬äºŒä¸ªæœ¬åœ°å˜é‡
       2: iconst_2              //
       3: istore_2          
       4: iload_1               //å°†ç¬¬äºŒä¸ªintå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶
       5: iload_2               //å°†ç¬¬ä¸‰ä¸ªintå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶
       6: iadd                  //å°†æ ˆé¡¶ä¸¤intå‹æ•°å€¼ç›¸åŠ å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶,æ‰§è¡Œ1+2
       7: bipush        10      //å°†å•å­—èŠ‚çš„å¸¸é‡å€¼(-128~127)æ¨é€è‡³æ ˆé¡¶
       9: imul                  //å°†æ ˆé¡¶ä¸¤intå‹æ•°å€¼ç›¸ä¹˜å¹¶å°†ç»“æœå‹å…¥æ ˆé¡¶,æ‰§è¡Œ3x10
      10: istore_3              //å°†æ ˆé¡¶intå‹æ•°å€¼å­˜å…¥ç¬¬å››ä¸ªæœ¬åœ°å˜é‡, int c =3
      11: iload_3               //
      12: ireturn

  public static void main(java.lang.String[]);
    Code:
       0: new           #2                  // class jvm/JVM01_Math
       3: dup
       4: invokespecial #3                  // Method "<init>":()V
       7: astore_1
       8: aload_1
       9: invokevirtual #4                  // Method compute:()I
      12: pop
      13: return

  static {};
    Code:
       0: sipush        666
       3: invokestatic  #5                  // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
       6: putstatic     #6                  // Field CONSTANT:Ljava/lang/Integer;
       9: return
}
```
âœ¨ å‚è€ƒ: JVMæŒ‡ä»¤æ‰‹å†Œ.pdf

ğŸ åˆ†æ
```java
int a = 1;

istore_1  
...
iload_1   
iload_2   å°†ç¬¬ä¸‰ä¸ªintå‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶


```


GC
```java
GCè°ƒä¼˜æ­¥éª¤ï¼š
1ã€æ‰“å°GCæ—¥å¿—
-XX:+PrintGCDetails  -XX:+PrintGCTimeStamps  -XX:+PrintGCDateStamps  -Xloggc:./gc.log
Tomcatåˆ™ç›´æ¥åŠ åœ¨JAVA_OPTSå˜é‡é‡Œ
2ã€åˆ†ææ—¥å¿—å¾—åˆ°å…³é”®æ€§æŒ‡æ ‡
3ã€åˆ†æGCåŸå› ï¼Œè°ƒä¼˜JVMå‚æ•°
```
